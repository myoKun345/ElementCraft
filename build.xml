<?xml version="1.0" encoding="UTF-8" ?>

<project name="ElementalExperimentation" default="build">

	<target name="build">
	
		<property file="../../jobs/ElementalExperimentation/build.properties">
			<entry key="build_number" type="int" operation="+" default="1"/>
		</property>
		
		<property name="build_number" file="../../jobs/ElementalExperimentation/build.properties" />
		
		<replace file="elex_common/mcmod.info" token="@@BUILD@@" value="${build_number}" />
		<replace file="elex_common/elex/lib/Reference.java" token="@@BUILD@@" value="${build_number}" />

		<exec executable="../Forge/forge/mcp/recompile.sh" dir="../Forge/forge/mcp" resolveexecutable="true" osfamily="unix"></exec>

		<exec executable="../Forge/forge/mcp/reobfuscate_srg.sh" dir="../Forge/forge/mcp" resolveexecutable="true" osfamily="unix"></exec>
		
		<delete dir="jars" />
		<mkdir dir="jars" />

		<copy todir="../../jobs/ElementalExperimentation/toJar/elex">

			<fileset dir="../Forge/forge/mcp/reobf/minecraft/elex" />

		</copy>

	</target>

</project>
